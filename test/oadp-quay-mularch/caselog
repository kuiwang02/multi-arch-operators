[root@preserve-olm-env2 oadp-quay-mularch]# oc get clusterversion
NAME      VERSION                              AVAILABLE   PROGRESSING   SINCE   STATUS
version   4.11.0-0.nightly-2022-04-16-163450   True        False         5h55m   Cluster version is 4.11.0-0.nightly-2022-04-16-163450
[root@preserve-olm-env2 oadp-quay-mularch]# 


@@@check if the og is created expectedly.
[root@preserve-olm-env2 oadp-quay-mularch]# cat og.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get og og-single -o yaml
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1","kind":"OperatorGroup","metadata":{"annotations":{},"name":"og-single","namespace":"default"},"spec":{"targetNamespaces":["default"]}}
  creationTimestamp: "2022-04-18T05:31:43Z"
  generation: 1
  name: og-single
  namespace: default
  resourceVersion: "147426"
  uid: c72e09fd-6c2a-45a5-baed-4e92b6b25e0a
spec:
  targetNamespaces:
  - default
  upgradeStrategy: Default
status:
  lastUpdated: "2022-04-18T05:31:43Z"
  namespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# 
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted


[root@preserve-olm-env2 oadp-quay-mularch]# cat og-default.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  upgradeStrategy: Default
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og-default.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get og og-single -o yaml
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1","kind":"OperatorGroup","metadata":{"annotations":{},"name":"og-single","namespace":"default"},"spec":{"targetNamespaces":["default"],"upgradeStrategy":"Default"}}
  creationTimestamp: "2022-04-18T05:32:49Z"
  generation: 1
  name: og-single
  namespace: default
  resourceVersion: "147848"
  uid: c5373435-d812-4912-b689-55d33f6479fc
spec:
  targetNamespaces:
  - default
  upgradeStrategy: Default
status:
  lastUpdated: "2022-04-18T05:32:49Z"
  namespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 


[root@preserve-olm-env2 oadp-quay-mularch]# cat og-foo.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  upgradeStrategy: foo
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og-foo.yaml 
The OperatorGroup "og-single" is invalid: spec.upgradeStrategy: Unsupported value: "foo": supported values: "Default", "TechPreviewUnsafeFailForward"
[root@preserve-olm-env2 oadp-quay-mularch]# 


[root@preserve-olm-env2 oadp-quay-mularch]# cat og-failforward.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  upgradeStrategy: TechPreviewUnsafeFailForward
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og-failforward.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get og og-single -o yaml
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1","kind":"OperatorGroup","metadata":{"annotations":{},"name":"og-single","namespace":"default"},"spec":{"targetNamespaces":["default"],"upgradeStrategy":"TechPreviewUnsafeFailForward"}}
  creationTimestamp: "2022-04-18T05:34:48Z"
  generation: 1
  name: og-single
  namespace: default
  resourceVersion: "148503"
  uid: e4126b20-7238-494d-98ad-88a457fd3766
spec:
  targetNamespaces:
  - default
  upgradeStrategy: TechPreviewUnsafeFailForward
status:
  lastUpdated: "2022-04-18T05:34:48Z"
  namespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 


[root@preserve-olm-env2 oadp-quay-mularch]# cat og-all.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-all
  namespace: default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og-all.yaml 
operatorgroup.operators.coreos.com/og-all created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get og og-all -o yaml
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1","kind":"OperatorGroup","metadata":{"annotations":{},"name":"og-all","namespace":"default"}}
  creationTimestamp: "2022-04-18T05:36:12Z"
  generation: 1
  name: og-all
  namespace: default
  resourceVersion: "148971"
  uid: ffbd4752-2871-4414-b9e2-c0ff44dce7c9
spec:
  upgradeStrategy: Default
status:
  lastUpdated: "2022-04-18T05:36:12Z"
  namespaces:
  - ""
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-all
operatorgroup.operators.coreos.com "og-all" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# cat og-allf.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-all
  namespace: default
spec:
  upgradeStrategy: TechPreviewUnsafeFailForward
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og-allf.yaml 
operatorgroup.operators.coreos.com/og-all created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get og og-all -o yaml
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1","kind":"OperatorGroup","metadata":{"annotations":{},"name":"og-all","namespace":"default"},"spec":{"upgradeStrategy":"TechPreviewUnsafeFailForward"}}
  creationTimestamp: "2022-04-18T05:37:53Z"
  generation: 1
  name: og-all
  namespace: default
  resourceVersion: "149554"
  uid: c8631f6a-87cb-4310-9cb7-a2a141339578
spec:
  upgradeStrategy: TechPreviewUnsafeFailForward
status:
  lastUpdated: "2022-04-18T05:37:53Z"
  namespaces:
  - ""
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-all
operatorgroup.operators.coreos.com "og-all" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 



@@@check if the existing behavior still works for good index. No need to make new case.
[root@preserve-olm-env2 oadp-quay-mularch]# cat og.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get og og-single -o yaml
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1","kind":"OperatorGroup","metadata":{"annotations":{},"name":"og-single","namespace":"default"},"spec":{"targetNamespaces":["default"]}}
  creationTimestamp: "2022-04-18T05:40:31Z"
  generation: 1
  name: og-single
  namespace: default
  resourceVersion: "150472"
  uid: d5a190d8-cbf9-4bcb-908c-2ac201fd259a
spec:
  targetNamespaces:
  - default
  upgradeStrategy: Default
status:
  lastUpdated: "2022-04-18T05:40:31Z"
  namespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# cat catsrc-good.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: olm-2378-catalog
  namespace: default
spec:
  displayName: OLM 2378 Operator Catalog
  image: quay.io/olmqe/olm-index:OLM-2378-Oadp-Good
  icon:
    base64data: ""
    mediatype: ""
  publisher: QE
  sourceType: grpc
  updateStrategy:
    registryPoll:
      interval: 10m0s
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f catsrc-good.yaml 
catalogsource.operators.coreos.com/olm-2378-catalog created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get catsrc olm-2378-catalog -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"CatalogSource","metadata":{"annotations":{},"name":"olm-2378-catalog","namespace":"default"},"spec":{"displayName":"OLM 2378 Operator Catalog","icon":{"base64data":"","mediatype":""},"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-Good","publisher":"QE","sourceType":"grpc","updateStrategy":{"registryPoll":{"interval":"10m0s"}}}}
  creationTimestamp: "2022-04-18T05:41:27Z"
  generation: 1
  name: olm-2378-catalog
  namespace: default
  resourceVersion: "150980"
  uid: 1a91d323-bfbf-473e-a002-e02a47cf7f06
spec:
  displayName: OLM 2378 Operator Catalog
  icon:
    base64data: ""
    mediatype: ""
  image: quay.io/olmqe/olm-index:OLM-2378-Oadp-Good
  publisher: QE
  sourceType: grpc
  updateStrategy:
    registryPoll:
      interval: 10m0s
status:
  connectionState:
    address: olm-2378-catalog.default.svc:50051
    lastConnect: "2022-04-18T05:41:50Z"
    lastObservedState: READY
  registryService:
    createdAt: "2022-04-18T05:41:27Z"
    port: "50051"
    protocol: grpc
    serviceName: olm-2378-catalog
    serviceNamespace: default
[root@preserve-olm-env2 oadp-quay-mularch]# 
[root@preserve-olm-env2 oadp-quay-mularch]# cat sub-oadp.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name:  oadp-operator
  namespace: default
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f sub-oadp.yaml 
subscription.operators.coreos.com/oadp-operator created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T05:42:55Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "151437"
  uid: 917cd1b3-6c12-4b58-a36c-cf5d6eb8561a
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "150980"
      uid: 1a91d323-bfbf-473e-a002-e02a47cf7f06
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "149108"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "149570"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "147455"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "147454"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "149710"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  conditions:
  - lastTransitionTime: "2022-04-18T05:42:56Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - lastTransitionTime: "2022-04-18T05:43:03Z"
    message: 'unpack job not completed: Unpack pod(default/2891dec2d2ea655dbb54c2a6c93d91ca857c6d2da790daea3b7010a0302gt2n)
      container(pull) is pending. Reason: PodInitializing, Message: .'
    reason: Installing
    status: "True"
    type: InstallPlanPending
  currentCSV: oadp-operator.v0.5.3
  installPlanGeneration: 1
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-jw4xt
    namespace: default
    resourceVersion: "151370"
    uid: 68b5583d-4504-4b2d-a04d-229ff6cf2eee
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-jw4xt
    uuid: 68b5583d-4504-4b2d-a04d-229ff6cf2eee
  lastUpdated: "2022-04-18T05:43:03Z"
  state: UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T05:42:55Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "153768"
  uid: 917cd1b3-6c12-4b58-a36c-cf5d6eb8561a
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "150980"
      uid: 1a91d323-bfbf-473e-a002-e02a47cf7f06
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "149108"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "149570"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "147455"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "147454"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "149710"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  conditions:
  - lastTransitionTime: "2022-04-18T05:42:56Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - lastTransitionTime: "2022-04-18T05:44:21Z"
    message: 'unpack job not completed: Unpack pod(default/071db9f439efea5b0df2d070a5524ed7e2c0fa9c58d0b4e7e2868c4081f2t4w)
      container(util) is pending. Reason: PodInitializing, Message:  | Unpack pod(default/071db9f439efea5b0df2d070a5524ed7e2c0fa9c58d0b4e7e2868c4081f2t4w)
      container(pull) is pending. Reason: PodInitializing, Message: .'
    reason: Installing
    status: "True"
    type: InstallPlanPending
  currentCSV: oadp-operator.v0.5.5
  installPlanGeneration: 3
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-7v5c2
    namespace: default
    resourceVersion: "153560"
    uid: a5e874ff-57ce-4329-983c-573f89b81b96
  installedCSV: oadp-operator.v0.5.4
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-7v5c2
    uuid: a5e874ff-57ce-4329-983c-573f89b81b96
  lastUpdated: "2022-04-18T05:44:21Z"
  state: UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T05:42:55Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "155135"
  uid: 917cd1b3-6c12-4b58-a36c-cf5d6eb8561a
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "150980"
      uid: 1a91d323-bfbf-473e-a002-e02a47cf7f06
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "149108"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "149570"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "147455"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "147454"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "149710"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  conditions:
  - lastTransitionTime: "2022-04-18T05:42:56Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - message: 'constraints not satisfiable: subscription oadp-operator exists, subscription
      oadp-operator requires at least one of olm-2378-catalog/default/alpha/oadp-operator.v0.5.6
      or @existing/default//oadp-operator.v0.5.5, clusterserviceversion oadp-operator.v0.5.4
      exists and is not referenced by a subscription, @existing/default//oadp-operator.v0.5.5,
      olm-2378-catalog/default/alpha/oadp-operator.v0.5.6 and @existing/default//oadp-operator.v0.5.4
      provide PodVolumeBackup (velero.io/v1)'
    reason: ConstraintsNotSatisfiable
    status: "True"
    type: ResolutionFailed
  currentCSV: oadp-operator.v0.5.5
  installPlanGeneration: 3
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-7v5c2
    namespace: default
    resourceVersion: "153560"
    uid: a5e874ff-57ce-4329-983c-573f89b81b96
  installedCSV: oadp-operator.v0.5.5
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-7v5c2
    uuid: a5e874ff-57ce-4329-983c-573f89b81b96
  lastUpdated: "2022-04-18T05:45:15Z"
  state: AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip
NAME            CSV                    APPROVAL    APPROVED
install-7v5c2   oadp-operator.v0.5.5   Automatic   true
install-bftlk   oadp-operator.v0.5.6   Automatic   true
install-jw4xt   oadp-operator.v0.5.3   Automatic   true
install-rc8xb   oadp-operator.v0.5.4   Automatic   true
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv
NAME                               DISPLAY                            VERSION     REPLACES               PHASE
elasticsearch-operator.5.4.0-152   OpenShift Elasticsearch Operator   5.4.0-152                          Succeeded
oadp-operator.v0.5.6               OADP Operator                      0.5.6       oadp-operator.v0.5.5   Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T05:42:55Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "156519"
  uid: 917cd1b3-6c12-4b58-a36c-cf5d6eb8561a
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "150980"
      uid: 1a91d323-bfbf-473e-a002-e02a47cf7f06
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "149108"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "149570"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "147455"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "147454"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "149710"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T05:42:56Z"
  conditions:
  - lastTransitionTime: "2022-04-18T05:42:56Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  currentCSV: oadp-operator.v0.5.6
  installPlanGeneration: 4
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-bftlk
    namespace: default
    resourceVersion: "155189"
    uid: de551070-24c9-4d91-b43e-da144e019090
  installedCSV: oadp-operator.v0.5.6
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-bftlk
    uuid: de551070-24c9-4d91-b43e-da144e019090
  lastUpdated: "2022-04-18T05:46:12Z"
  state: AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc delete csv oadp-operator.v0.5.6
clusterserviceversion.operators.coreos.com "oadp-operator.v0.5.6" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete sub oadp-operator
subscription.operators.coreos.com "oadp-operator" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete catsrc olm-2378-catalog
catalogsource.operators.coreos.com "olm-2378-catalog" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 


@@@check if the existing behavior still works for bad index. No need to make new case.
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# cat catsrc-csvfail.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: olm-2378-catalog
  namespace: default
spec:
  displayName: OLM 2378 Operator Catalog
  image: quay.io/olmqe/olm-index:OLM-2378-Oadp-csvfail
  icon:
    base64data: ""
    mediatype: ""
  publisher: QE
  sourceType: grpc
  updateStrategy:
    registryPoll:
      interval: 10m0s
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f catsrc-csvfail.yaml 
catalogsource.operators.coreos.com/olm-2378-catalog created
[root@preserve-olm-env2 oadp-quay-mularch]# cat sub-oadp.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name:  oadp-operator
  namespace: default
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f sub-oadp.yaml 
subscription.operators.coreos.com/oadp-operator created
[root@preserve-olm-env2 oadp-quay-mularch]# 
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T05:51:16Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "159130"
  uid: fe1c5084-b342-40ff-b2f9-f1db7c2b047f
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "158654"
      uid: 590bcf60-55e8-4c44-8aed-42a66479d44d
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "156845"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "157033"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "157037"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "151480"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "157035"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  conditions:
  - lastTransitionTime: "2022-04-18T05:51:18Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - lastTransitionTime: "2022-04-18T05:51:38Z"
    message: 'unpack job not completed: Unpack pod(default/704ff7a5096f8de2aa4c2d7264858b037cb53c7154c6ef726271557aafnpgb6)
      container(util) is pending. Reason: PodInitializing, Message:  | Unpack pod(default/704ff7a5096f8de2aa4c2d7264858b037cb53c7154c6ef726271557aafnpgb6)
      container(pull) is pending. Reason: PodInitializing, Message: .'
    reason: Installing
    status: "True"
    type: InstallPlanPending
  currentCSV: oadp-operator.v0.5.4
  installPlanGeneration: 2
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-xtt96
    namespace: default
    resourceVersion: "159051"
    uid: a933c253-fe68-459d-9ad4-4e1620edfb2b
  installedCSV: oadp-operator.v0.5.3
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-xtt96
    uuid: a933c253-fe68-459d-9ad4-4e1620edfb2b
  lastUpdated: "2022-04-18T05:51:38Z"
  state: UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T05:51:16Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "159451"
  uid: fe1c5084-b342-40ff-b2f9-f1db7c2b047f
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "158654"
      uid: 590bcf60-55e8-4c44-8aed-42a66479d44d
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "156845"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "157033"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "157037"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "151480"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "157035"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T05:51:18Z"
  conditions:
  - lastTransitionTime: "2022-04-18T05:51:18Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - lastTransitionTime: "2022-04-18T05:51:54Z"
    reason: Installing
    status: "True"
    type: InstallPlanPending
  currentCSV: oadp-operator.v0.5.4
  installPlanGeneration: 2
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-xtt96
    namespace: default
    resourceVersion: "159051"
    uid: a933c253-fe68-459d-9ad4-4e1620edfb2b
  installedCSV: oadp-operator.v0.5.3
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-xtt96
    uuid: a933c253-fe68-459d-9ad4-4e1620edfb2b
  lastUpdated: "2022-04-18T05:51:54Z"
  state: UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip
NAME            CSV                    APPROVAL    APPROVED
install-xtt96   oadp-operator.v0.5.4   Automatic   true
install-xv8zd   oadp-operator.v0.5.3   Automatic   true
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv
NAME                               DISPLAY                            VERSION     REPLACES               PHASE
elasticsearch-operator.5.4.0-152   OpenShift Elasticsearch Operator   5.4.0-152                          Succeeded
oadp-operator.v0.5.3               OADP Operator                      0.5.3                              Replacing
oadp-operator.v0.5.4               OADP Operator                      0.5.4       oadp-operator.v0.5.3   Installing

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.currentCSV}{\"\n\"}"
oadp-operator.v0.5.4
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"
oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installplan.name}{\"\n\"}"
install-xtt96

[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.4 -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.4 -o=jsonpath="{.status.phase}{\"\n\"}"
Failed

[root@preserve-olm-env2 oadp-quay-mularch]# oc delete csv oadp-operator.v0.5.4
clusterserviceversion.operators.coreos.com "oadp-operator.v0.5.4" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete csv oadp-operator.v0.5.3
clusterserviceversion.operators.coreos.com "oadp-operator.v0.5.3" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete sub oadp-operator
subscription.operators.coreos.com "oadp-operator" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete catsrc olm-2378-catalog
catalogsource.operators.coreos.com "olm-2378-catalog" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 




@@@csv fail, firstly default, fail, and switch to fail-forward.
[root@preserve-olm-env2 oadp-quay-mularch]# opm generate dockerfile indexgoodoneoperator/
[root@preserve-olm-env2 oadp-quay-mularch]# podman build -t quay.io/olmqe/olm-index:OLM-2378-Oadp-GoodOne -f indexgoodoneoperator.Dockerfile 
STEP 1/5: FROM quay.io/operator-framework/opm:latest
STEP 2/5: ENTRYPOINT ["/bin/opm"]
--> Using cache 399d0bbc15981d0e237555a78839a91f7041916b393fac3de21302f33b4a40f4
--> 399d0bbc159
STEP 3/5: CMD ["serve", "/configs"]
--> Using cache 159656ff98b1e9407f4eb8f16db0ef5f335d12384505e80849a93eaf695d18ea
--> 159656ff98b
STEP 4/5: ADD indexgoodoneoperator /configs
--> 51c7c0987fc
STEP 5/5: LABEL operators.operatorframework.io.index.configs.v1=/configs
COMMIT quay.io/olmqe/olm-index:OLM-2378-Oadp-GoodOne
--> 8b4e88a65d0
Successfully tagged quay.io/olmqe/olm-index:OLM-2378-Oadp-GoodOne
8b4e88a65d080534b233d647ef8a962038b1573007e5e371f2a461a620c6d2a5
[root@preserve-olm-env2 oadp-quay-mularch]# podman push quay.io/olmqe/olm-index:OLM-2378-Oadp-GoodOne
Getting image source signatures
Copying blob 1ea44aa7f696 done  
Copying blob 324075f0d95e skipped: already exists  
Copying blob 0d6867937695 skipped: already exists  
Copying blob 5b1fa8e3e100 skipped: already exists  
Copying blob eeaf5a4136cb skipped: already exists  
Copying blob 457de0330aa6 skipped: already exists  
Copying config 8b4e88a65d done  
Writing manifest to image destination
Storing signatures
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# opm generate dockerfile indexcsvfailTwo/
[root@preserve-olm-env2 oadp-quay-mularch]# podman build -t quay.io/olmqe/olm-index:OLM-2378-Oadp-CsvFailTwo -f indexcsvfailTwo.Dockerfile 
STEP 1/5: FROM quay.io/operator-framework/opm:latest
STEP 2/5: ENTRYPOINT ["/bin/opm"]
--> Using cache 399d0bbc15981d0e237555a78839a91f7041916b393fac3de21302f33b4a40f4
--> 399d0bbc159
STEP 3/5: CMD ["serve", "/configs"]
--> Using cache 159656ff98b1e9407f4eb8f16db0ef5f335d12384505e80849a93eaf695d18ea
--> 159656ff98b
STEP 4/5: ADD indexcsvfailTwo /configs
--> 6ad5e07585e
STEP 5/5: LABEL operators.operatorframework.io.index.configs.v1=/configs
COMMIT quay.io/olmqe/olm-index:OLM-2378-Oadp-CsvFailTwo
--> f81ab9fb149
Successfully tagged quay.io/olmqe/olm-index:OLM-2378-Oadp-CsvFailTwo
f81ab9fb149cda231158b872cc6bdf74c76fa6456603762c17501fb2b4a5ceab
[root@preserve-olm-env2 oadp-quay-mularch]# podman  push quay.io/olmqe/olm-index:OLM-2378-Oadp-CsvFailTwo
Getting image source signatures
Copying blob a0720d4ccfa9 done  
Copying blob eeaf5a4136cb skipped: already exists  
Copying blob 457de0330aa6 skipped: already exists  
Copying blob 5b1fa8e3e100 skipped: already exists  
Copying blob 324075f0d95e skipped: already exists  
Copying blob 0d6867937695 skipped: already exists  
Copying config f81ab9fb14 done  
Writing manifest to image destination
Storing signatures
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# cat og.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# cat catsrc-onegood.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: olm-2378-catalog
  namespace: default
spec:
  displayName: OLM 2378 Operator Catalog
  image: quay.io/olmqe/olm-index:OLM-2378-Oadp-GoodOne
  icon:
    base64data: ""
    mediatype: ""
  publisher: QE
  sourceType: grpc
  updateStrategy:
    registryPoll:
      interval: 10m0s
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f catsrc-onegood.yaml 
catalogsource.operators.coreos.com/olm-2378-catalog created
[root@preserve-olm-env2 oadp-quay-mularch]# cat sub-oadp.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name:  oadp-operator
  namespace: default
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f sub-oadp.yaml 
subscription.operators.coreos.com/oadp-operator created
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub
NAME            PACKAGE         SOURCE             CHANNEL
oadp-operator   oadp-operator   olm-2378-catalog   alpha
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip
NAME            CSV                    APPROVAL    APPROVED
install-hdx8r   oadp-operator.v0.5.3   Automatic   true
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv
NAME                               DISPLAY                            VERSION     REPLACES   PHASE
elasticsearch-operator.5.4.0-152   OpenShift Elasticsearch Operator   5.4.0-152              Succeeded
oadp-operator.v0.5.3               OADP Operator                      0.5.3                  Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc patch catsrc olm-2378-catalog --type=merge -p '{"spec":{"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-CsvFailTwo"}}'
catalogsource.operators.coreos.com/olm-2378-catalog patched
[root@preserve-olm-env2 oadp-quay-mularch]# 

@@@check the csv to 5.4

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"
oadp-operator.v0.5.4
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.currentCSV}{\"\n\"}"
oadp-operator.v0.5.4

@@@ wait 10m
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.4 -o=jsonpath="{.status.phase}{\"\n\"}";date
Failed
Mon Apr 18 14:33:55 CST 2022

[root@preserve-olm-env2 oadp-quay-mularch]# oc patch catsrc olm-2378-catalog --type=merge -p '{"spec":{"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-csvfail"}}'
catalogsource.operators.coreos.com/olm-2378-catalog patched

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T06:19:24Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "203184"
  uid: ff48dd81-6285-42b1-b7a9-918c451e0f99
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "183363"
      uid: 55b64612-8909-456c-a91a-031bdd169f90
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "181331"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "182489"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "181333"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "181335"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "181330"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  conditions:
  - lastTransitionTime: "2022-04-18T06:25:47Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - message: 'constraints not satisfiable: olm-2378-catalog/default/alpha/oadp-operator.v0.5.6,
      @existing/default//oadp-operator.v0.5.4 and @existing/default//oadp-operator.v0.5.3
      provide CloudStorage (oadp.openshift.io/v1alpha1), clusterserviceversion oadp-operator.v0.5.3
      exists and is not referenced by a subscription, subscription oadp-operator exists,
      subscription oadp-operator requires at least one of olm-2378-catalog/default/alpha/oadp-operator.v0.5.6
      or @existing/default//oadp-operator.v0.5.4'
    reason: ConstraintsNotSatisfiable
    status: "True"
    type: ResolutionFailed
  currentCSV: oadp-operator.v0.5.4
  installPlanGeneration: 2
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-h454b
    namespace: default
    resourceVersion: "183461"
    uid: 7e248804-860f-46ea-8945-728abbf8ad5f
  installedCSV: oadp-operator.v0.5.4
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-h454b
    uuid: 7e248804-860f-46ea-8945-728abbf8ad5f
  lastUpdated: "2022-04-18T06:40:48Z"
  state: AtLatestKnown

@@@no csv change
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.currentCSV}{\"\n\"}"
oadp-operator.v0.5.4
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"
oadp-operator.v0.5.4
[root@preserve-olm-env2 oadp-quay-mularch]# 
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip
NAME            CSV                    APPROVAL    APPROVED
install-h454b   oadp-operator.v0.5.4   Automatic   true
install-hdx8r   oadp-operator.v0.5.3   Automatic   true
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc patch og og-single --type=merge -p '{"spec":{"upgradeStrategy":"TechPreviewUnsafeFailForward"}}'
operatorgroup.operators.coreos.com/og-single patched
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.coreos.com/v1alpha1","kind":"Subscription","metadata":{"annotations":{},"name":"oadp-operator","namespace":"default"},"spec":{"channel":"alpha","installPlanApproval":"Automatic","name":"oadp-operator","source":"olm-2378-catalog","sourceNamespace":"default","startingCSV":"oadp-operator.v0.5.3"}}
  creationTimestamp: "2022-04-18T06:19:24Z"
  generation: 1
  labels:
    operators.coreos.com/oadp-operator.default: ""
  name: oadp-operator
  namespace: default
  resourceVersion: "209265"
  uid: ff48dd81-6285-42b1-b7a9-918c451e0f99
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
status:
  catalogHealth:
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: olm-2378-catalog
      namespace: default
      resourceVersion: "183363"
      uid: 55b64612-8909-456c-a91a-031bdd169f90
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: certified-operators
      namespace: openshift-marketplace
      resourceVersion: "181331"
      uid: 88e90f1a-fb89-49c9-b819-eaed69c23b8d
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: community-operators
      namespace: openshift-marketplace
      resourceVersion: "182489"
      uid: 25ce65ec-23b5-4bbb-9610-fce6fc3931ba
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: qe-app-registry
      namespace: openshift-marketplace
      resourceVersion: "181333"
      uid: 9ab66e6a-91a4-4888-9617-936f6aa23dfc
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-marketplace
      namespace: openshift-marketplace
      resourceVersion: "181335"
      uid: fdb068ce-03fe-47a4-986c-6f54fbf4b6df
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  - catalogSourceRef:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      name: redhat-operators
      namespace: openshift-marketplace
      resourceVersion: "181330"
      uid: 1d5c6679-df64-41d5-a2a0-9df2ef96ac93
    healthy: true
    lastUpdated: "2022-04-18T06:25:47Z"
  conditions:
  - lastTransitionTime: "2022-04-18T06:25:47Z"
    message: all available catalogsources are healthy
    reason: AllCatalogSourcesHealthy
    status: "False"
    type: CatalogSourcesUnhealthy
  - lastTransitionTime: "2022-04-18T06:44:54Z"
    reason: Installing
    status: "True"
    type: InstallPlanPending
  currentCSV: oadp-operator.v0.5.6
  installPlanGeneration: 3
  installPlanRef:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-zpk6q
    namespace: default
    resourceVersion: "207466"
    uid: 415f96be-8952-433c-9c86-6661d4a5ae9b
  installedCSV: oadp-operator.v0.5.4
  installplan:
    apiVersion: operators.coreos.com/v1alpha1
    kind: InstallPlan
    name: install-zpk6q
    uuid: 415f96be-8952-433c-9c86-6661d4a5ae9b
  lastUpdated: "2022-04-18T06:44:54Z"
  state: UpgradePending


[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip
NAME            CSV                    APPROVAL    APPROVED
install-h454b   oadp-operator.v0.5.4   Automatic   true
install-hdx8r   oadp-operator.v0.5.3   Automatic   true
install-zpk6q   oadp-operator.v0.5.6   Automatic   true
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv
NAME                               DISPLAY                            VERSION     REPLACES               PHASE
elasticsearch-operator.5.4.0-152   OpenShift Elasticsearch Operator   5.4.0-152                          Succeeded
oadp-operator.v0.5.6               OADP Operator                      0.5.6       oadp-operator.v0.5.4   Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc delete csv oadp-operator.v0.5.6
clusterserviceversion.operators.coreos.com "oadp-operator.v0.5.6" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete sub oadp-operator
subscription.operators.coreos.com "oadp-operator" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete catsrc olm-2378-catalog
catalogsource.operators.coreos.com "olm-2378-catalog" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 



@@@ip fail, firstly default, fail, and switch to fail-forward.

[root@preserve-olm-env2 oadp-quay-mularch]# cat og.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# cat catsrc-onegood.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: olm-2378-catalog
  namespace: default
spec:
  displayName: OLM 2378 Operator Catalog
  image: quay.io/olmqe/olm-index:OLM-2378-Oadp-GoodOne
  icon:
    base64data: ""
    mediatype: ""
  publisher: QE
  sourceType: grpc
  updateStrategy:
    registryPoll:
      interval: 2m0s
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f catsrc-onegood.yaml 
catalogsource.operators.coreos.com/olm-2378-catalog created
[root@preserve-olm-env2 oadp-quay-mularch]# cat sub-oadp.yaml 
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name:  oadp-operator
  namespace: default
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f sub-oadp.yaml 
subscription.operators.coreos.com/oadp-operator created
[root@preserve-olm-env2 oadp-quay-mularch]# 

@@@ check 5.3 is installed correctly

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"
oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.3 -o=jsonpath="{.status.phase}{\"\n\"}"
Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc patch catsrc olm-2378-catalog --type=merge -p '{"spec":{"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-ipfailTwo"}}'
catalogsource.operators.coreos.com/olm-2378-catalog patched
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"
oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.currentCSV}{\"\n\"}"
oadp-operator.v0.5.5
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installplan.name}{\"\n\"}"
install-dlslk

[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-dlslk -o=jsonpath="{.status.phase}{\"\n\"}"
Failed

@@@ optional check
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradeFailed
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradePending

[root@preserve-olm-env2 oadp-quay-mularch]# oc patch og og-single --type=merge -p '{"spec":{"upgradeStrategy":"TechPreviewUnsafeFailForward"}}'
operatorgroup.operators.coreos.com/og-single patched
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc patch catsrc olm-2378-catalog --type=merge -p '{"spec":{"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-ipfailskip"}}'
catalogsource.operators.coreos.com/olm-2378-catalog patched
[root@preserve-olm-env2 oadp-quay-mularch]# 

@@@ optional check
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradeFailed
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradeFailed
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.currentCSV}{\"\n\"}"
oadp-operator.v0.5.6
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.6 -o=jsonpath="{.status.phase}{\"\n\"}"
Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# 

[root@preserve-olm-env2 oadp-quay-mularch]# oc delete csv oadp-operator.v0.5.6
clusterserviceversion.operators.coreos.com "oadp-operator.v0.5.6" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete sub oadp-operator
subscription.operators.coreos.com "oadp-operator" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete catsrc olm-2378-catalog
catalogsource.operators.coreos.com "olm-2378-catalog" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 


@@@ip fail, create fail-forward. No need case

[root@preserve-olm-env2 oadp-quay-mularch]# cat og-failforward.yaml 
kind: OperatorGroup
apiVersion: operators.coreos.com/v1
metadata:
  name: og-single
  namespace: default
spec:
  upgradeStrategy: TechPreviewUnsafeFailForward
  targetNamespaces:
  - default
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f og-failforward.yaml 
operatorgroup.operators.coreos.com/og-single created
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f catsrc-onegood.yaml
catalogsource.operators.coreos.com/olm-2378-catalog created
[root@preserve-olm-env2 oadp-quay-mularch]# cat sub-oadp.yaml
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name:  oadp-operator
  namespace: default
spec:
  channel: alpha
  installPlanApproval: Automatic
  name: oadp-operator
  source: olm-2378-catalog
  sourceNamespace: default
  startingCSV: oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc apply -f sub-oadp.yaml 
subscription.operators.coreos.com/oadp-operator created
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"

[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installedCSV}{\"\n\"}"
oadp-operator.v0.5.3
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.3 -o=jsonpath="{.status.phase}{\"\n\"}"
Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# oc patch catsrc olm-2378-catalog --type=merge -p '{"spec":{"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-ipfailTwo"}}'
catalogsource.operators.coreos.com/olm-2378-catalog patched
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
AtLatestKnown
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradePending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.installplan.name}{\"\n\"}"
install-zfb4h
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get ip install-zfb4h -o=jsonpath="{.status.phase}{\"\n\"}"
Failed
[root@preserve-olm-env2 oadp-quay-mularch]# oc patch catsrc olm-2378-catalog --type=merge -p '{"spec":{"image":"quay.io/olmqe/olm-index:OLM-2378-Oadp-ipfailskip"}}'
catalogsource.operators.coreos.com/olm-2378-catalog patched
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradeFailed
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.state}{\"\n\"}"
UpgradeFailed
[root@preserve-olm-env2 oadp-quay-mularch]# oc get sub oadp-operator -o=jsonpath="{.status.currentCSV}{\"\n\"}"
oadp-operator.v0.5.6
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.6 -o=jsonpath="{.status.phase}{\"\n\"}"
Pending
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.6 -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.6 -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.6 -o=jsonpath="{.status.phase}{\"\n\"}"
Installing
[root@preserve-olm-env2 oadp-quay-mularch]# oc get csv oadp-operator.v0.5.6 -o=jsonpath="{.status.phase}{\"\n\"}"
Succeeded
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete csv oadp-operator.v0.5.6
clusterserviceversion.operators.coreos.com "oadp-operator.v0.5.6" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete sub oadp-operator
subscription.operators.coreos.com "oadp-operator" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete catsrc olm-2378-catalog
catalogsource.operators.coreos.com "olm-2378-catalog" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# oc delete og og-single
operatorgroup.operators.coreos.com "og-single" deleted
[root@preserve-olm-env2 oadp-quay-mularch]# 



